# How to Enable Real-Time Observability of Network Policies and Endpoint Changes in Azure Kubernetes Service (AKS) with Cilium


## Overview
This guide will help you enable real-time observability of network policies and endpoint changes in Azure Kubernetes Service (AKS) using Cilium's support for CiliumEndpointSlices with Azure CNI. By following these instructions, you will be able to leverage Cilium's dynamic endpoint management and advanced network policy enforcement capabilities in your AKS clusters.\n\n## Requirements\n- An active Azure subscription\n- Familiarity with basic Kubernetes networking concepts\n- A running Azure Kubernetes Service (AKS) cluster\n- Access to the Azure Portal, CLI, or ARM templates\n- Latest stable release of Cilium that supports EndpointSlices\n\n## Steps to Enable Real-Time Observability of Network Policies and Endpoint Changes\n\n### 1. Enable CiliumEndpointSlices with Azure CNI\nDuring the AKS cluster creation workflow, find the option to enable CiliumEndpointSlices with Azure CNI. This can be done via the Azure Portal, CLI, or ARM templates.\n\n### 2. Configure Endpoint Slice Parameters\nSet parameters such as refresh intervals, maximum slice size, and error thresholds according to your operational needs.\n\n### 3. Toggle Logging and Observability Settings\nEnsure that advanced logging and observability settings specific to endpoint slice operations are enabled.\n\n### 4. Monitor Endpoint Slice Operations\nUse Azure Monitor and Log Analytics to observe the health, latency, and error rates of your endpoint slice operations. \n\n### 5. Configure Alerts\nSet up alert configurations for critical events such as synchronization failures or policy enforcement breaches.\n\n## Verification\nTo verify that real-time observability is enabled, monitor your AKS cluster using Azure Monitor and Log Analytics. You should be able to see detailed logging, metrics, and diagnostic information for endpoint slice operations. \n\n## Troubleshooting\nIf discrepancies arise between the Kubernetes API and the underlying Cilium management layer, use the provided mechanisms for manual override and re-synchronization. \n\n## Related Resources\n- [Cilium Official Documentation](https://docs.cilium.io/en/latest/)\n- [Kubernetes Networking Best Practices](https://kubernetes.io/docs/concepts/services-networking/)\n- [Azure Monitor Documentation](https://docs.microsoft.com/en-us/azure/azure-monitor/)\n- [Log Analytics Documentation](https://docs.microsoft.com/en-us/azure/azure-monitor/logs/)